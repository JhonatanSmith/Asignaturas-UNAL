---
title: "Examen 1 muestreo"
author: "Jhonatan Smith G"
date: "24/3/2021"
output: pdf_document
---
```{r}
datos =read.csv("datos.csv",sep=";")
```


A) Segun el ejercicio, se nos solicita calcular el tamaño de una muestra tal que:
Se permita estimar el gasto promedio en Salario minimo por hogar
El limite del errror sea de 0.6 SMLV.
Con una confianza dell 99%.

Se sabe que el promedio publacional de una poblacion será $\mu$. Ahora,con esta informacion podemos aplicar la formula del tamaño muestral dada por:

 * $n = (N*S^2)/((N-1)*D+S^2)$ con $N$ el tamaño de la poblacion y 
 $D=\frac{B^2}{Z_\frac{\alpha}{2}}$
 
 Se conoce el valor de N pero se desconoce el de $S^2$ (La varizanza muestral). 
 
 Calculando la varianza muestral del ingreso de la muestra piloto (dada por aparte de la base de datos) con la funcion de R var(x) entonces:
 
 Los hogares seleccionados en la muestra pilotos fueron los hogares identificados con los codigos 3,65,24,105,136,67,9,95 y 69 respectivamente. En ese orden, si vamos a la base de datos y nos fijamos en los datos de gastos tendremos que, en ese mismo orden, los gastos fueron de:
 
 1.05,0.88,0.59,1.00,1.01,0.74,0.85,1.18 y 1.14 respectivamente. 
 
```{r}
piloto= c(1.05,0.88,0.59,1.00,1.01,0.74,0.85,1.18,1.14 )
var(piloto)
```
$S^2=0.03654444$

 Ahora, teniendo calculado la varianza muestral, calculemos el valor de D.
 
 Para ello, tenemos que:  $D=\frac{B^2}{Z_\frac{\alpha}{2}}$ y de aqui, necesitamos una aproximacion a la normal al 99%. Este valor es:
 
```{r}
qnorm(0.995)
```
 $Z_\frac{\alpha}{2}=2.575829$
 
 finalmente, D = 0.001397608
 
 N = al tamaño total de la poblacion estudiada, es de 200. Entonces reemplzanado en la formula dada para calcular el tamaño de n tenemos que:
 n=(200*0.03654444)/(0.03654444+199*0.001397608)= 23.22727
 
 Esto implica que el tamaño de la muestra para tener un error del 0.06 con un nivel de confianza al 99% debe de ser de 24 hogares.
 
 B)
```{r include=FALSE}
prueba1 = c(143, 177, 138, 80, 164, 57, 8, 101, 26, 35, 173, 161, 85, 44, 103, 95, 194, 157, 1, 39, 54, 167, 96, 58,
153, 113, 156, 4, 180, 200, 104, 124, 37)

muestradatos = datos[prueba1,]
```
 
```{r include=FALSE}
muestra = c(0.97,0.77,1.02,0.93,1.12,0.72,1.38,0.98,1.07,0.88,1.11,1.07,1.12,0.89,1.19,1.18,0.79,0.93,0.89,0.88,1.05,0.92,0.98,1.14,1.14,0.94,1.04,0.75,1.20,1.27,0.81,1.25,1.01)
var(muestra)
mean(muestra)
```
 
 
  Un estimador de $\mu$ (media poblacional) para estimar el promedio de ingresos de los salarios, es la media muestral.
 
 Sea X la variable aleatoria que mide el ingreso de los encuestados en la muestra piloto, entonces $\bar{X}$ es un estimador insesgado de $\mu$
 
 entonces, el valor de $\mu$ = 1.011818
 
 
 1.011818+sqrt((0.02583409*167)/(33*200))*2.575829= 1.077675
 1.011818-sqrt((0.02583409*167)/(33*200))*2.575829 = 0.9459613
 
 Entonces el IC pedido es (1.077675,0.9459613)
 
 C) Con la muestra dada en (b) realice la estimación del gasto promedio por hogar para los hogares Sin Niños de la población en estudio junto con su intervalo de confianza del 99 % .
 
```{r}
nohijos = c(0.93,0.88,0.79,0.74,1,0.85,0.75)
mean(nohijos)
var(nohijos)
``` 
 Nuevamente, en este caso tenemos un calculo de un IC al 99% de confianza, sin embargo, esta ya es el calculo de una subpoblacion ya que la poblacion objetivos es, de los hogares que NO tienen hijos, calcular el ingreso promedio. De estos 33 hogares, 7 no tinenen hijos. La media muestral se calcula sobre esos 7 hogares. 
 
 Ahora, podemos calcular un IC con la formula anterior, teniendo en cuenta el analisis subpoblacional realizado. 
 
 Un IC pedido es (0.7654692,0.9316736)
 0.8485714-sqrt((0.009247619*26)/(33*7))*2.575829=0.7654692
 0.8485714+sqrt((0.009247619*26)/(33*7))*2.575829=0.9316736
 
 D) Este ejercicio se realiza igual que el anterior, debido a problemas de conexion, no tuve tiempo de realizarlo. Sin embargo, bastaria con sacar la subpoblacion pedida de la muestra dada (en este caso de 27, pues 7 no tinenen hijos y 26 si) y realizar los mismos calculos del IC.
 
 
